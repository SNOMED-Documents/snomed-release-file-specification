# DEPRECATED:  Annotation Reference Set

## Deprecation

The use of this reference set structure is now **discouraged** as it requires implementers to create a new refset concept for every new annotation type. New RF2 specifications have been created for annotations, please refer to these for future use:

* [Component Annotation String Value Reference set](<../5.2.4 metadata-reference-sets/5.2.4.8-component-annotation-string-value-reference-set.md>)
* [Member Annotation String Value Reference set](<../5.2.4 metadata-reference-sets/5.2.4.9-member-annotation-string-value-reference-set.md>)

## Purpose

An [900000000000516008 |Annotation type reference set|](http://snomed.info/id/900000000000516008) allows String to be associated with components for any specified purpose.

## Data structure

An annotation reference set is a String reference set used to apply text annotation to selected SNOMED CT components.

**Annotation reference set - Data structure**

<table data-full-width="true"><thead><tr><th width="208.56640625">Field</th><th width="99.15234375">Data type</th><th width="303.1640625">Purpose</th><th width="89.484375">Mutable</th><th>PK*</th></tr></thead><tbody><tr><td>id</td><td>UUID</td><td>A 128 bit unsigned Integer, uniquely identifying this reference set member.Different versions of a <em>reference set member</em> share the same id but have different effectiveTime. This allows a <em>reference set member</em> to be modified or made inactive (i.e. removed from the active set) at a specified time.</td><td><mark style="color:$danger;">NO</mark></td><td><mark style="color:$success;">YES</mark><br>(Full/Snapshot)</td></tr><tr><td>effectiveTime</td><td>Time</td><td><p>The inclusive date or time at which this version of the identified reference set member became the current version.</p><p><strong>Note</strong> : In distribution files the effectiveTime should follow the short ISO date format (<em>YYYYMM DD</em>) and should not include the hours, minutes, seconds or timezone indicator.The current version of this reference set member at time <em>T</em> is the version with the most recent effectiveTime prior to or equal to time <em>T</em>.</p></td><td><mark style="color:$success;">YES</mark></td><td><mark style="color:$success;">YES</mark> <br>(Full)<br><mark style="color:$success;">Optional</mark> (Snapshot)</td></tr><tr><td>active</td><td>Boolean</td><td>The state of the identified reference set member as at the specified effectiveTime. If active = 1 (true) the reference set member is part of the current version of the set, if active = 0 (false) the reference set member is not part of the current version of the set.</td><td><mark style="color:$success;">YES</mark></td><td><mark style="color:$danger;">NO</mark></td></tr><tr><td>moduleId</td><td>SCTID</td><td><p>Identifies the SNOMED CT module that contains this reference set member as at the specified effectiveTime .</p><p>The value must be a subtype of <a href="http://snomed.info/id/900000000000443000">900000000000443000 |Module (core metadata concept)|</a> within the metadata hierarchy.</p></td><td><mark style="color:$success;">YES</mark></td><td><mark style="color:$danger;">NO</mark></td></tr><tr><td>refsetId</td><td>SCTID</td><td><p>Identifies the reference set to which this reference set member belongs.</p><p>A subtype descendant of:</p><p><a href="http://snomed.info/id/446609009">4</a><a href="http://snomed.info/id/900000000000521006">9</a><a href="http://snomed.info/id/900000000000516008">900000000000516008 |Annotation type|</a></p></td><td><mark style="color:$danger;">NO</mark></td><td><mark style="color:$danger;">NO</mark></td></tr><tr><td>referencedComponentId</td><td>SCTID</td><td>A reference to the SNOMED CT component to be included in the reference set.</td><td><mark style="color:$danger;">NO</mark></td><td><mark style="color:$danger;">NO</mark></td></tr><tr><td>annotation</td><td>String</td><td>The text annotation to attach to the component identified by referencedComponentId.</td><td><mark style="color:$success;">YES</mark></td><td><mark style="color:$danger;">NO</mark></td></tr></tbody></table>

***

{% hint style="info" %}
PK\* indicates if the attribute is part of the primary key for that file/table.
{% endhint %}

## Metadata

The following metadata in supports this reference set :

**Annotation References Sets in the Metadata Hierarchy**

> &#x20;  [900000000000454005 |Foundation metadata concept|](http://snomed.info/id/900000000000454005)\
> &#x20;        [900000000000455006 |Reference set|](http://snomed.info/id/900000000000455006)\
> &#x20;                [900000000000516008 |Annotation type|](http://snomed.info/id/900000000000516008)\
> &#x20;                        [900000000000517004 |Associated image|](http://snomed.info/id/900000000000517004)

## Reference Set Descriptor and Example Data

{% hint style="info" %}
**Notes on the tables used to show descriptors and examples**

The reference set example tables on this page have been revised as follows to aid clarity and understanding:

* The first four columns which are present in all release files are not shown. The omitted columns (id, effectiveTime, active, moduleId) are used in the same way in all referenced sets to support identification, versioning and packaging. They do not directly affect the specific features of a particular reference set or reference set type.
* Reference set columns that contain SNOMED CT identifiers are expanded to show details of the concept or description referenced by that identifier. In some cases, the term is shown in the same column using the expression syntax, in other cases an additional column with a name suffix '\_term' has been added. In the standard reference set files only the identifier is present in the column and there is no added column for the term. When using reference sets, the term and other details of the component are looked up from the relevant component release files.
{% endhint %}

#### Descriptor Template

The tables below show the descriptors that define the structure of the [|Annotation type reference set|](http://snomed.info/id/900000000000516008) pattern and examples of the descriptors for specific reference sets that follow this pattern.

**Table: Descriptor Template for Annotation Reference Sets**

<table data-full-width="true"><thead><tr><th width="131.00390625">refsetId</th><th width="212.98828125">referencedComponentId</th><th width="194.5859375">attributeDescription </th><th>attributeType </th><th>attributeOrder </th></tr></thead><tbody><tr><td><a href="http://snomed.info/id/900000000000456007">900000000000456007 |Reference set descriptor|</a></td><td><p></p><p><a href="http://snomed.info/id/900000000000516008">900000000000516008 |Annotation type|</a><br><br></p></td><td><a href="http://snomed.info/id/900000000000518009">900000000000518009 |Annotated component|</a></td><td><a href="http://snomed.info/id/900000000000461009">900000000000461009 |Concept type component|</a></td><td>0</td></tr><tr><td><a href="http://snomed.info/id/900000000000456007">900000000000456007 |Reference set descriptor|</a></td><td><a href="http://snomed.info/id/900000000000516008">900000000000516008 |Annotation type|</a></td><td><a href="http://snomed.info/id/900000000000519001">900000000000519001 |Annotation|</a></td><td><a href="http://snomed.info/id/900000000000465000">900000000000465000 |String|</a></td><td>1</td></tr></tbody></table>

***

The attributeType for the Annotation field can be any descendant of the " string " concept in the metadata hierarchy. This hierarchy is described in more detail under the [Reference set descriptor](<../5.2.4 metadata-reference-sets/5.2.4.1-reference-set-descriptor.md>) section.

**Descriptor for the Associated Image Annotation Reference set**

<table data-full-width="true"><thead><tr><th width="131.00390625">refsetId</th><th width="212.98828125">referencedComponentId</th><th width="194.5859375">attributeDescription </th><th>attributeType</th><th>attributeOrder</th></tr></thead><tbody><tr><td><a href="http://snomed.info/id/900000000000456007">900000000000456007 |Reference set descriptor|</a></td><td><p></p><p><a href="http://snomed.info/id/900000000000517004">900000000000517004 |Associated image|</a><br><br></p></td><td><a href="http://snomed.info/id/900000000000518009">900000000000518009 |Annotated component|</a></td><td><a href="http://snomed.info/id/900000000000461009">900000000000461009 |Concept type component|</a></td><td>0</td></tr><tr><td><a href="http://snomed.info/id/900000000000456007">900000000000456007 |Reference set descriptor|</a></td><td><a href="http://snomed.info/id/900000000000517004">900000000000517004 |Associated image|</a></td><td><a href="http://snomed.info/id/900000000000520007">900000000000520007 |Image|</a></td><td><a href="http://snomed.info/id/900000000000469006">900000000000469006 |URL|</a></td><td>1</td></tr></tbody></table>

***

Note that in the table above, the 900000000000469006 <mark style="color:blue;">|</mark>URL<mark style="color:blue;">|</mark> concept is a descendant of <mark style="color:blue;">|</mark>string<mark style="color:blue;">|</mark> concept in the metadata.

#### Annotation Reference Set Example

As no annotation reference sets are included in the International Release, these sample rows are for illustration only.

**Example of Associated image Annotation Reference Set**

<table data-full-width="true"><thead><tr><th width="206.30859375">refsetId</th><th width="225.79296875">referencedComponentId</th><th>Annotation</th></tr></thead><tbody><tr><td><a href="http://snomed.info/id/900000000000517004">900000000000517004 |Associated image|</a></td><td><a href="http://snomed.info/id/80891009">80891009 |Heart structure|</a></td><td><a href="http://en.wikipedia.org/wiki/Heart#mediaviewer/File:Wiki_Heart_Antomy_Ties_van_Brussel.jpg">http://en.wikipedia.org/wiki/Heart#mediaviewer/File:Wiki_Heart_Antomy_Ties_van_Brussel.jpg</a></td></tr><tr><td><a href="http://snomed.info/id/900000000000517004">900000000000517004 |Associated image|</a></td><td><a href="http://snomed.info/id/86174004">86174004 |Laparoscope|</a></td><td><a href="http://www.educationaldimensions.com/eLearn/endoscope/bigScope.html">http://www.educationaldimensions.com/eLearn/endoscope/bigScope.html</a></td></tr></tbody></table>

***

In the above example, the two URLs have been used to annotate two SNOMED CT concepts with images on the web. It is not recommended that this mechanism be used to annotate concepts with text that may require translation to other languages. Instead, such text should be included under an appropriate description type within the Description.
