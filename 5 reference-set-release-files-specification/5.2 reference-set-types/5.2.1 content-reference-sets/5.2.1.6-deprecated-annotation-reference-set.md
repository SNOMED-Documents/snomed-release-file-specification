# 5.2.1.6 DEPRECATED: Annotation Reference Set

# Deprecation

The use of this reference set structure is now discouraged as it requires implementers to create a new refset concept for every new annotation type. A new refset format is currently being discussed here: [SNOMED CT Annotations](https://confluence.ihtsdotools.org/display/mag/SNOMED+CT+Annotations) and alternate RF2 specifications will be generated in due course.

# Purpose

An [ 900000000000516008 | Annotation type reference set|](http://snomed.info/id/900000000000516008 "900000000000516008 | Annotation type reference set |") allows [String](https://confluence.ihtsdotools.org/display/DOCRELFMT/String+\(data+type\) "Reference term: String \(\(data type\)\)") to be associated with components for any specified purpose.

# Data structure

An [annotation reference set](https://confluence.ihtsdotools.org/display/DOCGLOSS/annotation+reference+set "Glossary link: annotation reference set") is a [String](https://confluence.ihtsdotools.org/display/DOCRELFMT/String+\(data+type\) "Reference term: String \(\(data type\)\)") [reference set](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set "Glossary link: reference set") used to apply text [annotation](https://confluence.ihtsdotools.org/display/DOCRELFMT/annotation+\(field\) "Reference term: annotation \(\(field\)\)") to selected [SNOMED CT components](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+CT+component "Glossary link: SNOMED CT components"). 

Table 5.2.1.6-1: Annotation reference set - Data structure

  

**Field**| **Data type**| **Purpose**| **[Mutable](https://confluence.ihtsdotools.org/display/DOCGLOSS/Mutable "Glossary link: Mutable")**| **Part of Primary Key**  
---|---|---|---|---  
id| [UUID](https://confluence.ihtsdotools.org/display/DOCRELFMT/UUID+\(data+type\) "Reference term: UUID \(\(data type\)\)")| A 128 bit unsigned [Integer](https://confluence.ihtsdotools.org/display/DOCRELFMT/Integer+\(data+type\) "Reference term: Integer \(\(data type\)\)"), uniquely identifying this [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member "Glossary link: reference set member").Different versions of a _reference set member_ share the same [id](https://confluence.ihtsdotools.org/display/DOCRELFMT/id+\(field\) "Reference term: id \(\(field\)\)") but have different [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\) "Reference term: effectiveTime \(\(field\)\)"). This allows a _reference set member_ to be modified or made [inactive](https://confluence.ihtsdotools.org/display/DOCRELFMT/inactive+\(field\) "Reference term: inactive \(field\)") (i.e. removed from the active set) at a specified time.   
| NO| YES (Full /Snapshot)  
[effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\) "Reference term: effectiveTime \(\(field\)\)")| [Time](https://confluence.ihtsdotools.org/display/DOCRELFMT/Time+\(data+type\) "Reference term: Time \(\(data type\)\)")| The inclusive date or time at which this version of the identified [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member "Glossary link: reference set member") became the current version.**Note** : In distribution files the effectiveTime should follow the short ISO date format (_YYYYMM _DD__) and should not include the hours, minutes, seconds or timezone indicator.The current version of this [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member "Glossary link: reference set member") at time _T_ is the version with the most recent [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\) "Reference term: effectiveTime \(\(field\)\)") prior to or equal to time _T_ .   
| YES| YES (Full)Optional (Snapshot)   
[active](https://confluence.ihtsdotools.org/display/DOCRELFMT/active+\(field\) "Reference term: active \(\(field\)\)")| [Boolean](https://confluence.ihtsdotools.org/display/DOCRELFMT/Boolean+\(data+type\) "Reference term: Boolean \(\(data type\)\)")| The state of the identified [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member "Glossary link: reference set member") as at the specified [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\) "Reference term: effectiveTime \(\(field\)\)") .If [active](https://confluence.ihtsdotools.org/display/DOCRELFMT/active+\(field\) "Reference term: active \(\(field\)\)") = 1 (true) the [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member "Glossary link: reference set member") is part of the current version of the set, if [active](https://confluence.ihtsdotools.org/display/DOCRELFMT/active+\(field\) "Reference term: active \(\(field\)\)") = 0 (false) the [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member "Glossary link: reference set member") is not part of the current version of the set.   
| YES| NO  
[moduleId](https://confluence.ihtsdotools.org/display/DOCRELFMT/moduleId+\(field\) "Reference term: moduleId \(\(field\)\)")| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(\(data type\)\)")| Identifies the [SNOMED CT module](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+CT+module "Glossary link: SNOMED CT module") that contains this [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member "Glossary link: reference set member") as at the specified [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\) "Reference term: effectiveTime \(\(field\)\)") .The value must be a [subtype](https://confluence.ihtsdotools.org/display/DOCGLOSS/subtype "Glossary link: subtype") of [ 900000000000443000 | Module (core metadata concept)|](http://snomed.info/id/900000000000443000 "900000000000443000 | Module \(core metadata concept\) |") within the metadata [hierarchy](https://confluence.ihtsdotools.org/display/DOCGLOSS/hierarchy "Glossary link: hierarchy").   
| YES| NO  
[refsetId](https://confluence.ihtsdotools.org/display/DOCRELFMT/refsetId+\(field\) "Reference term: refsetId \(\(field\)\)")| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(\(data type\)\)")| Identifies the [reference set](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set "Glossary link: reference set") to which this [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member "Glossary link: reference set member") belongs. In this case, a subtype descendant of: [ 900000000000516008 | Annotation type|](http://snomed.info/id/900000000000516008 "900000000000516008 | Annotation type |") | NO| NO  
[referencedComponentId](https://confluence.ihtsdotools.org/display/DOCRELFMT/referencedComponentId+\(field\) "Reference term: referencedComponentId \(\(field\)\)")| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\) "Reference term: SCTID \(\(data type\)\)")| A reference to the [SNOMED CT component](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+CT+component "Glossary link: SNOMED CT component") to be included in the [reference set](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set "Glossary link: reference set"). The [component](https://confluence.ihtsdotools.org/display/DOCGLOSS/component "Glossary link: component") to which the annotation is being applied.| NO| NO  
[annotation](https://confluence.ihtsdotools.org/display/DOCRELFMT/annotation+\(field\) "Reference term: annotation \(\(field\)\)")| [String](https://confluence.ihtsdotools.org/display/DOCRELFMT/String+\(data+type\) "Reference term: String \(\(data type\)\)")| The text [annotation](https://confluence.ihtsdotools.org/display/DOCRELFMT/annotation+\(field\) "Reference term: annotation \(\(field\)\)") to attach to the [component](https://confluence.ihtsdotools.org/display/DOCGLOSS/component "Glossary link: component") identified by [referencedComponentId](https://confluence.ihtsdotools.org/display/DOCRELFMT/referencedComponentId+\(field\) "Reference term: referencedComponentId \(\(field\)\)") .| YES| NO  
  
  

# Metadata

The following metadata in supports this [reference set](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set "Glossary link: reference set") : 

Table 5.2.1.6-2: Annotation References Sets in the Metadata Hierarchy

[ 900000000000454005 |Foundation metadata concept|](http://snomed.info/id/900000000000454005 "900000000000454005 | Foundation metadata concept |")   
[ 900000000000455006 |Reference set|](http://snomed.info/id/900000000000455006 "900000000000455006 | Reference set |")   
[ 900000000000516008 |Annotation type|](http://snomed.info/id/900000000000516008 "900000000000516008 | Annotation type |")   
[ 900000000000517004 |Associated image|](http://snomed.info/id/900000000000517004 "900000000000517004 | Associated image |")   
  

  

# Reference Set Descriptor and Example Data

## Descriptor Template

The tables below show the descriptors that define the structure of the [ 900000000000516008 | Annotation type reference set|](http://snomed.info/id/900000000000516008 "900000000000516008 | Annotation type reference set |") pattern and examples of the descriptors for specific [reference sets](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set "Glossary link: reference sets") that follow this pattern. 

Table 5.2.1.6-3: Descriptor Template for Annotation Reference Sets

**refsetId**| **referencedComponentId**| **attributeDescription**| **attributeType**| **attributeOrder**  
---|---|---|---|---  
[ 900000000000456007 | Reference set descriptor|](http://snomed.info/id/900000000000456007 "900000000000456007 | Reference set descriptor |") |  [ 900000000000516008 | Annotation type|](http://snomed.info/id/900000000000516008 "900000000000516008 | Annotation type |") |  [ 900000000000518009 | Annotated component|](http://snomed.info/id/900000000000518009 "900000000000518009 | Annotated component |") |  [ 900000000000461009 | Concept type component|](http://snomed.info/id/900000000000461009 "900000000000461009 | Concept type component |") | 0  
[ 900000000000456007 | Reference set descriptor|](http://snomed.info/id/900000000000456007 "900000000000456007 | Reference set descriptor |") |  [ 900000000000516008 | Annotation type|](http://snomed.info/id/900000000000516008 "900000000000516008 | Annotation type |") |  [ 900000000000519001 | Annotation|](http://snomed.info/id/900000000000519001 "900000000000519001 | Annotation |") |  [ 900000000000465000 | String|](http://snomed.info/id/900000000000465000 "900000000000465000 | String |") | 1  
  
The [attributeType](https://confluence.ihtsdotools.org/display/DOCRELFMT/attributeType+\(field\) "Reference term: attributeType \(\(field\)\)") for the [Annotation](https://confluence.ihtsdotools.org/display/WIPRELFMT/annotation+\(field\)) field can be any [descendant](https://confluence.ihtsdotools.org/display/DOCGLOSS/descendant "Glossary link: descendant") of the " [string](https://confluence.ihtsdotools.org/display/WIPRELFMT/String+\(data+type\)) " [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") in the metadata [hierarchy](https://confluence.ihtsdotools.org/display/DOCGLOSS/hierarchy "Glossary link: hierarchy"). This [hierarchy](https://confluence.ihtsdotools.org/display/DOCGLOSS/hierarchy "Glossary link: hierarchy") is described in more detail under the " [Reference set](https://confluence.ihtsdotools.org/display/DOCGLOSS/Reference+set "Glossary link: Reference set") descriptor" section. 

Table 5.2.1.6-4: Descriptor for the Associated Image Annotation Reference set

**refsetId**| **referencedComponentId**| **attributeDescription**| **attributeType**| **attributeOrder**  
---|---|---|---|---  
[ 900000000000456007 | Reference set descriptor|](http://snomed.info/id/900000000000456007 "900000000000456007 | Reference set descriptor |") |  [ 900000000000517004 | Associated image|](http://snomed.info/id/900000000000517004 "900000000000517004 | Associated image |") |  [ 900000000000518009 | Annotated component|](http://snomed.info/id/900000000000518009 "900000000000518009 | Annotated component |") |  [ 900000000000461009 | Concept type component|](http://snomed.info/id/900000000000461009 "900000000000461009 | Concept type component |") | 0  
[ 900000000000456007 | Reference set descriptor|](http://snomed.info/id/900000000000456007 "900000000000456007 | Reference set descriptor |") |  [ 900000000000517004 | Associated image|](http://snomed.info/id/900000000000517004 "900000000000517004 | Associated image |") |  [ 900000000000520007 | Image|](http://snomed.info/id/900000000000520007 "900000000000520007 | Image |") |  [ 900000000000469006 | URL|](http://snomed.info/id/900000000000469006 "900000000000469006 | URL |") | 1  
  
Note that in the table above, the [ 900000000000469006 | URL|](http://snomed.info/id/900000000000469006 "900000000000469006 | URL |") [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") is a [descendant](https://confluence.ihtsdotools.org/display/DOCGLOSS/descendant "Glossary link: descendant") of | [string](https://confluence.ihtsdotools.org/display/WIPRELFMT/String+\(data+type\)) | [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concept") in the metadata.

## Annotation Reference Set Example

As no annotation reference sets are included in the International Release, these sample rows are for illustration only. 

Table 5.2.1.6-5: Example of Associated image Annotation Reference Set

**refsetId**| **referencedComponentId**| **Annotation**  
---|---|---  
[ 900000000000517004 | Associated image|](http://snomed.info/id/900000000000517004 "900000000000517004 | Associated image |") |  [ 80891009 | Heart structure|](http://snomed.info/id/80891009 "80891009 | Heart structure |") | http://en.wikipedia.org/wiki/Heart#mediaviewer/File:Wiki_Heart_Antomy_Ties_van_Brussel.jpg  
[ 900000000000517004 | Associated image|](http://snomed.info/id/900000000000517004 "900000000000517004 | Associated image |") |  [ 86174004 | Laparoscope|](http://snomed.info/id/86174004 "86174004 | Laparoscope |") | http://www.educationaldimensions.com/eLearn/endoscope/bigScope.html  
  
In the above example, the two URLs have been used to annotate two [SNOMED CT concepts](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+CT+concept "Glossary link: SNOMED CT concepts") with images on the web. It is not recommended that this mechanism be used to annotate [concepts](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept "Glossary link: concepts") with text that may require translation to other [languages](https://confluence.ihtsdotools.org/display/DOCGLOSS/language "Glossary link: languages"). Instead, such text should be included under an appropriate [description](https://confluence.ihtsdotools.org/display/DOCGLOSS/description "Glossary link: description") type within the [Description](https://confluence.ihtsdotools.org/display/DOCRELFMT/Description+file "Reference term: Description file").
