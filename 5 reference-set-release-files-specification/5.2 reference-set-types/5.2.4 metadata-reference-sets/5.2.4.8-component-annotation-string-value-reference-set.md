# Component Annotation String Value Reference Set

## Purpose

A Component Annotation Refset will be created to support annotations on components (concepts, descriptions, relationships, etc) of SNOMED CT.

The SNOMED CT International Release contains Annotations content in two reference sets:

* The Member Annotation String Value reference set, in which annotations are held on members of any reference set(s).
* The Component Annotation String Value reference set, in which annotations are assigned to any SNOMED CT component.

{% hint style="info" %}
These reference sets replace the previous Annotation Type refset, which has now been deprecated.
{% endhint %}

## Data Structure

**A Component Annotation String Value reference set is structured as shown in the following table:**

<table data-full-width="true"><thead><tr><th width="208.015625">Field</th><th width="94.0859375">Data type</th><th width="621.0711059570312">Purpose</th><th width="89.25390625">Mutable</th><th width="144.0390625">PK*</th></tr></thead><tbody><tr><td>id</td><td>UUID</td><td><p>A 128 bit unsigned Integer, uniquely identifying this reference set member.</p><p>Different versions of a <em>reference set member</em> share the same id but have different effectiveTime. This allows a <em>reference set member</em> to be modified or made inactive (i.e. removed from the active set) at a specified time.</p></td><td><mark style="color:$danger;"><strong>NO</strong></mark></td><td><mark style="color:$success;"><strong>YES</strong></mark> <br>(Full /Snapshot)</td></tr><tr><td>effectiveTime</td><td>Time</td><td><p>The inclusive date or time at which this version of the identified reference set member became the current version.</p><p><strong>Note</strong>: In distribution files the effectiveTime should follow the short ISO date format (<em>YYYYMMDD</em>) and should not include the hours, minutes, seconds or timezone indicator.</p><p>The current version of this reference set member at time <em>T</em> is the version with the most recent effectiveTime prior to or equal to time <em>T</em>.</p></td><td><mark style="color:$success;"><strong>YES</strong></mark> </td><td><p><mark style="color:$success;"><strong>YES</strong></mark> <br>(Full)</p><p><mark style="color:$success;">Optional</mark> (Snapshot) </p></td></tr><tr><td>active</td><td>Boolean</td><td><p>The state of the identified reference set member as at the specified effectiveTime .</p><p>If active = 1 (true) the reference set member is part of the current version of the set, if active = 0 (false) the reference set member is not part of the current version of the set.</p></td><td><mark style="color:$success;"><strong>YES</strong></mark> </td><td><mark style="color:$danger;"><strong>NO</strong></mark></td></tr><tr><td>moduleId</td><td>SCTID</td><td><p>Identifies the SNOMED CT module that contains this reference set member as at the specified effectiveTime .</p><p>The value must be a subtype of <a href="http://snomed.info/id/900000000000443000">900000000000443000 |Module (core metadata concept)|</a> within the metadata hierarchy.</p></td><td><mark style="color:$success;"><strong>YES</strong></mark> </td><td><mark style="color:$danger;"><strong>NO</strong></mark></td></tr><tr><td>refsetId</td><td>SCTID</td><td><p>Identifies the reference set to which this reference set member belongs.</p><p>In this case, a subtype descendant of: 1292992004 |Component annotation with string value reference set (foundation metadata concept)|</p></td><td><mark style="color:$danger;"><strong>NO</strong></mark></td><td><mark style="color:$danger;"><strong>NO</strong></mark></td></tr><tr><td>referencedComponentId</td><td>SCTID</td><td><p>A reference to the SNOMED CT component to be included in the reference set.</p><p>The component (concept, description, relationship) to which the annotation applies.</p></td><td><mark style="color:$danger;"><strong>NO</strong></mark></td><td><mark style="color:$danger;"><strong>NO</strong></mark></td></tr><tr><td>languageDialectCode</td><td>String</td><td><p>Specifies the language of the Annotation text using the two character ISO-639-1 code. Note that this specifies a language level only, not a country code.  However, a dialect can also be included by following the standard <a href="https://www.rfc-editor.org/info/rfc5646">RFC 5646</a>, although this is an <em>optional</em> inclusion.  The new concept 1304275002 |Language or dialect code (foundation metadata concept)| has been added for the metadata for this refset.</p><p><strong>NOTE:</strong>  This field should be blank wherever a language code is not applicable, but never NULL.</p></td><td><mark style="color:$success;"><strong>YES</strong></mark></td><td><mark style="color:$danger;"><strong>NO</strong></mark></td></tr><tr><td>typeId</td><td>SCTID</td><td>Any descendant of 1295447006 |Annotation attribute (attribute)| minus 1295449009 |Additional relationship attribute (attribute)| and its descendant in the attribute hierarchy. </td><td><mark style="color:$danger;"><strong>NO</strong></mark></td><td><mark style="color:$danger;"><strong>NO</strong></mark></td></tr><tr><td>value</td><td>String</td><td>The Annotation text itself, with a maximum size of 32Kb, represented in <a href="../../../appendices/appendix-b.-specification-reference-information/u/utf-8.md">UTF-8</a> encoding.</td><td><mark style="color:$success;"><strong>YES</strong></mark></td><td><mark style="color:$danger;"><strong>NO</strong></mark></td></tr></tbody></table>

{% hint style="info" %}
PK\* indicates if the attribute is part of the primary key for that file/table.
{% endhint %}

***

## RF2 File naming convention

A Component Annotation String Value reference set should be named along the lines of the following convention:

* der2\_scsRefset\_ComponentAnnotationStringValueSnapshot\_\_\[Product]\_ \_\_\[date]\_.txt

For example, for an International Release on 1st December 2023:

* der2\_scsRefset\_ComponentAnnotationStringValueSnapshot\_INT\_20231201.txt

## Descriptor Template and Examples

The reference set example tables on this page have been revised as follows to aid clarity and understanding:

* The first four columns which are present in all release files are not shown. The omitted columns ( id, effectiveTime, active) are used in the same way in all referenced sets to support identification, versioning and packaging. They do not directly affect the specific features of a particular reference set or reference set type.
* Reference set columns that contain SNOMED CT identifiers are expanded to show details of the concept or description referenced by that identifier. In some cases, the term is shown in the same column using the expression syntax, in other cases an additional column with a name suffix '\_term' has been added. In the standard reference set files only the identifier is present in the column and there is no added column for the term. When using reference sets, the term and other details of the component are looked up from the relevant component release files.

#### Descriptor Template

The table below shows the descriptors that define the structure of the 1292992004 |Component annotation with string value reference set (foundation metadata concept)| pattern and examples of the descriptors for specific reference sets that follow this pattern.

**Descriptor templates for Component Annotation String Value reference sets**

<table data-full-width="true"><thead><tr><th width="244.132080078125">refsetId</th><th width="418.02508544921875">referencedComponentId</th><th width="330.70672607421875">attributeDescription</th><th width="600.378173828125">attributeType</th><th>attributeOrder</th></tr></thead><tbody><tr><td><a href="http://snomed.info/id/900000000000456007">900000000000456007 |Reference set descriptor|</a></td><td>1292992004 |Component annotation with string value reference set (foundation metadata concept) |</td><td><a href="http://snomed.info/id/900000000000518009">900000000000518009 |Annotated component|</a></td><td><p>900000000000460005 |Component type (foundation metadata concept)|</p><p>excluding the postcoordinated expression and rerfset member type components</p></td><td>0</td></tr><tr><td><a href="http://snomed.info/id/900000000000456007">900000000000456007 |Reference set descriptor|</a></td><td>1292992004 |Component annotation with string value reference set (foundation metadata concept) |</td><td>1304275002 |Language or dialect code (foundation metadata concept)|</td><td>900000000000465000 |String (foundation metadata concept)|</td><td>1</td></tr><tr><td><a href="http://snomed.info/id/900000000000456007">900000000000456007 |Reference set descriptor|</a></td><td>1292992004 |Component annotation with string value reference set (foundation metadata concept) |</td><td>1296892000 |Annotation type (foundation metadata concept)|</td><td>900000000000461009 |Concept type component|</td><td>2</td></tr><tr><td><a href="http://snomed.info/id/900000000000456007">900000000000456007 |Reference set descriptor|</a></td><td>1292992004 |Component annotation with string value reference set (foundation metadata concept) |</td><td>900000000000519001 |Annotation value (foundation metadata concept)|</td><td>900000000000465000 |String (foundation metadata concept)|</td><td>3</td></tr></tbody></table>

***

#### Component Annotation String Value Reference Set Example

<table data-full-width="true"><thead><tr><th>id</th><th>effectiveTime</th><th>active</th><th>moduleId</th><th>refsetId</th><th>referencedComponentId</th><th>languageDialectCode</th><th>annotationTypeId</th><th>Annotation</th></tr></thead><tbody><tr><td>00000000-1111-2222-3333-444444444444</td><td>20240131</td><td>1</td><td><p><a href="http://snomed.info/id/900000000000012004">900000000000012004 </a></p><p><a href="http://snomed.info/id/900000000000012004">|SNOMED CT model component module|</a></p></td><td>1292992004 | Component annotation with string value reference set (foundation metadata concept) |</td><td>784371009 |Huntington disease-like 1 (disorder)|</td><td>en</td><td>|Attribution (attribute)|</td><td>"Inserm Orphanet"</td></tr><tr><td>00000000-1111-2222-3333-444444444444</td><td>20240131</td><td>1</td><td><p><a href="http://snomed.info/id/900000000000012004">900000000000012004 </a></p><p><a href="http://snomed.info/id/900000000000012004">|SNOMED CT model component module|</a></p></td><td>1292992004 | Component annotation with string value reference set (foundation metadata concept) |</td><td>103741018 |Radius, NOS|</td><td>en</td><td>|Inactivation note (attribute)|</td><td>"Non-conformance to the description convention for structure concept. The suffix NOS for classification should not be used."</td></tr><tr><td>00000000-1111-2222-3333-444444444444</td><td>20240131</td><td>1</td><td><p><a href="http://snomed.info/id/900000000000012004">900000000000012004 </a></p><p><a href="http://snomed.info/id/900000000000012004">|SNOMED CT model component module|</a></p></td><td>1292992004 | Component annotation with string value reference set (foundation metadata concept) |</td><td>425523004 |Entire bone organ of spine (body structure)|</td><td>en</td><td>|Inactivation note (attribute)|</td><td>"No suitable replacement concept identified"</td></tr><tr><td>00000000-1111-2222-3333-444444444444</td><td>20240131</td><td>1</td><td><p><a href="http://snomed.info/id/900000000000012004">900000000000012004 </a></p><p><a href="http://snomed.info/id/900000000000012004">|SNOMED CT model component module|</a></p></td><td>1292992004 | Component annotation with string value reference set (foundation metadata concept) |</td><td>370137002 |Extension Namespace {1000000} (namespace concept)|</td><td>en</td><td>|Namespace owner (attribute)|</td><td>NHS Digital (UK)</td></tr></tbody></table>

***
