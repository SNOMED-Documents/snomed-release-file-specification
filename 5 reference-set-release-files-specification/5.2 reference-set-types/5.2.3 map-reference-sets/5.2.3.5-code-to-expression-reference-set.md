# Code to Expression Reference Set

## Purpose

The [705109006 | Code to expression type reference set|](http://snomed.info/id/705109006) is designed to enable associations between codes in another code system ([other-codes](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code)) and [SNOMED CT concepts](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+CT+concept), where the following constraints apply:

1. Some of the [other-codes](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code) cannot be mapped to an individual SNOMED CT [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept).
2. Licensing conditions (or other considerations) prevent addition of new SNOMED CT concepts to represent the same meaning as the [other-codes](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code).
3. The [other-codes](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code) can be logically defined using the [SNOMED concept model](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+concept+model) to represent the same meaning ([sufficiently defined](https://confluence.ihtsdotools.org/display/DOCGLOSS/sufficiently+defined)) or a similar though less specific meaning ([primitive](https://confluence.ihtsdotools.org/display/DOCGLOSS/primitive)).
4. Other requirements similar for those applicable to mapping may also apply including:
   1. An indication of the degree of correlation between the [other-code](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code) and the SNOMED CT expression.
   2. An indication of whether the [other-code](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code) was created before any single concept representation of that meaning in SNOMED CT or whether the single concept representation in SNOMED CT predated the creation of the association.

## Data Structure

The general approach to the above requirements is to associate each of the [other-codes](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code) with a representation of the same logic based definition as would have been applied to a SNOMED CT concept with that meaning. However, since the [other-code](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code) are not identified by an [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\)), the logical definition cannot be represented using [defining relationships](https://confluence.ihtsdotools.org/display/DOCGLOSS/defining+relationship). There are two potential approaches to this, one would be to use a general purpose description logic language (e.g. [OWL](https://confluence.ihtsdotools.org/display/DOCGLOSS/OWL)) and the other is to use a [SNOMED CT expression](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+CT+expression) to represent each definition. The [| Code to expression type reference set|](http://snomed.info/id/705109006) is designed to support the expression-based approach.

Table 5.2.3.5-1: Code to Expression Reference Set - Data structure

| **Field**                                                                                                     | **Data type**                                                                         | **Purpose**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | [**Mutable**](https://confluence.ihtsdotools.org/display/DOCGLOSS/Mutable) | **Part of Primary Key**                                         |
| ------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------- | --------------------------------------------------------------- |
| id                                                                                                            | [UUID](https://confluence.ihtsdotools.org/display/DOCRELFMT/UUID+\(data+type\))       | A 128 bit unsigned [Integer](https://confluence.ihtsdotools.org/display/DOCRELFMT/Integer+\(data+type\)), uniquely identifying this [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member).Different versions of a _reference set member_ share the same [id](https://confluence.ihtsdotools.org/display/DOCRELFMT/id+\(field\)) but have different [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\)). This allows a _reference set member_ to be modified or made [inactive](https://confluence.ihtsdotools.org/display/DOCRELFMT/inactive+\(field\)) (i.e. removed from the active set) at a specified time.                                             |                                                                            |                                                                 |
| NO                                                                                                            | YES (Full /Snapshot)                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                            |                                                                 |
| [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\))                 | [Time](https://confluence.ihtsdotools.org/display/DOCRELFMT/Time+\(data+type\))       | The inclusive date or time at which this version of the identified [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member) became the current version.**Note** : In distribution files the effectiveTime should follow the short ISO date format (_YYYYMM DD_) and should not include the hours, minutes, seconds or timezone indicator.The current version of this [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member) at time _T_ is the version with the most recent [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\)) prior to or equal to time _T_ .                                                      |                                                                            |                                                                 |
| YES                                                                                                           | YES (Full)Optional (Snapshot)                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                            |                                                                 |
| [active](https://confluence.ihtsdotools.org/display/DOCRELFMT/active+\(field\))                               | [Boolean](https://confluence.ihtsdotools.org/display/DOCRELFMT/Boolean+\(data+type\)) | The state of the identified [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member) as at the specified [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\)) .If [active](https://confluence.ihtsdotools.org/display/DOCRELFMT/active+\(field\)) = 1 (true) the [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member) is part of the current version of the set, if [active](https://confluence.ihtsdotools.org/display/DOCRELFMT/active+\(field\)) = 0 (false) the [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member) is not part of the current version of the set. |                                                                            |                                                                 |
| YES                                                                                                           | NO                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                            |                                                                 |
| [moduleId](https://confluence.ihtsdotools.org/display/DOCRELFMT/moduleId+\(field\))                           | [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\))     | Identifies the [SNOMED CT module](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+CT+module) that contains this [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member) as at the specified [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\)) .The value must be a [subtype](https://confluence.ihtsdotools.org/display/DOCGLOSS/subtype) of \[ 900000000000443000                                                                                                                                                                                                                                                                               | Module (core metadata concept)                                             | ]\(http://snomed.info/id/900000000000443000 "900000000000443000 |
| YES                                                                                                           | NO                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                            |                                                                 |
| [refsetId](https://confluence.ihtsdotools.org/display/DOCRELFMT/refsetId+\(field\))                           | [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\))     | Identifies the [reference set](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set) to which this [reference set member](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set+member) belongs. In this case, a subtype descendant of: \[ 705109006                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Code to expression type reference set                                      | ]\(http://snomed.info/id/705109006 "705109006                   |
| [referencedComponentId](https://confluence.ihtsdotools.org/display/DOCRELFMT/referencedComponentId+\(field\)) | [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\))     | A reference to the [SNOMED CT component](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+CT+component) to be included in the [reference set](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set). A subtype of \[ 705113004                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Terminology system                                                         | ]\(http://snomed.info/id/705113004 "705113004                   |

* For example: [705114005 | LOINC Code System|](http://snomed.info/id/705114005) .

\| NO| NO\
[mapSource](https://confluence.ihtsdotools.org/display/DOCRELFMT/mapSource+\(field\))| [String](https://confluence.ihtsdotools.org/display/DOCRELFMT/String+\(data+type\))| The [other-code](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code) which is mapped to the SNOMED CT expression.| NO| NO\
[expression](https://confluence.ihtsdotools.org/display/DOCRELFMT/expression+\(field\))| [String](https://confluence.ihtsdotools.org/display/DOCRELFMT/String+\(data+type\))| A [SNOMED CT expression](https://confluence.ihtsdotools.org/display/DOCGLOSS/SNOMED+CT+expression) that represents the meaning of the [other-code](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code). This expression may be a [stated](https://confluence.ihtsdotools.org/display/DOCGLOSS/stated+view) or [inferred view](https://confluence.ihtsdotools.org/display/DOCGLOSS/inferred+view) of the definition provided that documentation of each identified reference set specifies the view provided.The expression must conform to the syntax defined in the [SNOMED CT Compositional Grammar - Specification and Guide](https://confluence.ihtsdotools.org/display/DOCSCG/Compositional+Grammar+-+Specification+and+Guide) ([http://snomed.org/scg](http://snomed.org/scg)).| YES| NO\
[definitionStatusId](https://confluence.ihtsdotools.org/display/DOCRELFMT/definitionStatusId+\(field\)) \*\*\
\*\*| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\))| Indicates whether or not the expression contains a sufficient definition of the [other-code](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code) in the mapSource field.\
Possible values are the following subtypes of [900000000000444006 | Definition status|](http://snomed.info/id/900000000000444006) : [900000000000074008 |Not sufficiently defined by necessary conditions definition status|](http://snomed.info/id/900000000000074008)\
[900000000000073002 |Sufficiently defined by necessary conditions definition status|](http://snomed.info/id/900000000000073002) | YES| NO\
[correlationId](https://confluence.ihtsdotools.org/display/DOCRELFMT/correlationId+\(field\))| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\))| The correlation between the [other-code](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code) and the SNOMED CT expression. Possible values are the following subtypes of [1193546000 | Map source to map target correlation (foundation metadata concept)|](http://snomed.info/id/1193546000) : [1193552004 |Map source to map target correlation not specified|](http://snomed.info/id/1193552004)\
[1193551006 |Map source not mappable to map target|](http://snomed.info/id/1193551006)\
[1193550007 |Partial overlap between map source and target|](http://snomed.info/id/1193550007)\
[1193549007 |Narrow map source to broad map target|](http://snomed.info/id/1193549007)\
[1193548004 |Exact match between map source and map target|](http://snomed.info/id/1193548004)\
[1193547009 |Broad map source to narrow map target|](http://snomed.info/id/1193547009) When these values are applied to this reference set type, the phrase "_map source_ " refers to the [other-code](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code). and the "_map target_ " refers to the SNOMED CT expression.| YES| NO\
[contentOriginId](https://confluence.ihtsdotools.org/display/DOCRELFMT/contentOriginId+\(field\))| [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\))| Indication of whether the concept was initially in one of the terminologies (SNOMED CT or [other-codes](https://confluence.ihtsdotools.org/display/DOCGLOSS/other-code)) and added to the other as part of mapping or was in both terminologies at the outset. Values are subtypes of [705116007 | Original code system source for linked content value|](http://snomed.info/id/705116007) .| YES| NO

## Metadata

The following metadata [hierarchy](https://confluence.ihtsdotools.org/display/DOCGLOSS/hierarchy) supports this [reference set](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set):

Table 5.2.3.5-2: Code to Expression Reference Set in the Metadata Hierarchy

[900000000000454005 |Foundation metadata concept|](http://snomed.info/id/900000000000454005)\
[900000000000455006 |Reference set|](http://snomed.info/id/900000000000455006)\
[705109006 |Code to expression type reference set|](http://snomed.info/id/705109006)

## Reference Set Descriptor and Example Data

### Descriptor template and examples

The tables below show the descriptors that define examples of [reference sets](https://confluence.ihtsdotools.org/display/DOCGLOSS/reference+set) that follow the [705109006 | Code to expression type reference set (foundation metadata concept)|](http://snomed.info/id/705109006) pattern.

Table 5.2.3.5-3: Refset Descriptor rows for a Code to Expression Reference Set

| **refsetId**          | **referencedComponentId (Referenced component)** | **attributeDescription (Attribute description)**                | **attributeType (Attribute type)** | **attributeOrder (Attribute order)** |
| --------------------- | ------------------------------------------------ | --------------------------------------------------------------- | ---------------------------------- | ------------------------------------ |
| \[ 900000000000456007 | Reference set descriptor                         | ]\(http://snomed.info/id/900000000000456007 "900000000000456007 | Reference set descriptor           | ")                                   |
| \[ 900000000000456007 | Reference set descriptor                         | ]\(http://snomed.info/id/900000000000456007 "900000000000456007 | Reference set descriptor           | ")                                   |

\| [900000000000505001 | Map target|](http://snomed.info/id/900000000000505001) | [900000000000465000 | String|](http://snomed.info/id/900000000000465000) | 1\
[900000000000456007 | Reference set descriptor|](http://snomed.info/id/900000000000456007) | [705109006 | Code to expression type reference set|](http://snomed.info/id/705109006) | [706999006 | Expression|](http://snomed.info/id/706999006) | [706999006 | Expression|](http://snomed.info/id/706999006) | 2\
[900000000000456007 | Reference set descriptor|](http://snomed.info/id/900000000000456007) | [705109006 | Code to expression type reference set|](http://snomed.info/id/705109006) [705109006 | Code to expression type reference set|](http://snomed.info/id/705109006) | [734867002 | Expression definition status|](http://snomed.info/id/734867002) | [900000000000461009 | Concept type component|](http://snomed.info/id/900000000000461009) | 3\
[900000000000456007 | Reference set descriptor|](http://snomed.info/id/900000000000456007) | [705109006 | Code to expression type reference set|](http://snomed.info/id/705109006) | [447247004 | SNOMED CT source code to target map code correlation value|](http://snomed.info/id/447247004) | [900000000000461009 | Concept type component|](http://snomed.info/id/900000000000461009) | 4\
[900000000000456007 | Reference set descriptor|](http://snomed.info/id/900000000000456007) | [705109006 | Code to expression type reference set|](http://snomed.info/id/705109006)\
\| [705116007 | Original code system source for linked content value|](http://snomed.info/id/705116007) | [900000000000461009 | Concept type component|](http://snomed.info/id/900000000000461009) | 5

### Refset Examples

Table 5.2.3.5-4: Sample Content from a Code to Expression Type Reference Set

| **refsetId** | **referencedComponentId**              | **mapSource**                                 | expression                             | definitionStatusId | correlationId | contentOriginId   |
| ------------ | -------------------------------------- | --------------------------------------------- | -------------------------------------- | ------------------ | ------------- | ----------------- |
| \[ 705110001 | LOINC Term to Expression reference set | ]\(http://snomed.info/id/705110001 "705110001 | LOINC Term to Expression reference set | ")                 | \[ 705114005  | LOINC Code System |
| \[ 705110001 | LOINC Term to Expression reference set | ]\(http://snomed.info/id/705110001 "705110001 | LOINC Term to Expression reference set | ")                 | \[ 705114005  | LOINC Code System |
| \[ 705110001 | LOINC Term to Expression reference set | ]\(http://snomed.info/id/705110001 "705110001 | LOINC Term to Expression reference set | ")                 | \[ 705114005  | LOINC Code System |
| \[ 705117003 | Originally in LOINC                    | ]\(http://snomed.info/id/705117003 "705117003 | Originally in LOINC                    | ")                 |               |                   |
| \[ 705110001 | LOINC Term to Expression reference set | ]\(http://snomed.info/id/705110001 "705110001 | LOINC Term to Expression reference set | ")                 | \[ 705114005  | LOINC Code System |
| \[ 705117003 | Originally in LOINC                    | ]\(http://snomed.info/id/705117003 "705117003 | Originally in LOINC                    | ")                 |               |                   |
| \[ 705110001 | LOINC Term to Expression reference set | ]\(http://snomed.info/id/705110001 "705110001 | LOINC Term to Expression reference set | ")                 | \[ 705114005  | LOINC Code System |

Related Links

* For further information see Using LOINC with SNOMED CT: [4.2.2 LOINC Term to Expression Reference Set](https://confluence.ihtsdotools.org/display/DOCLOINC/4.2.2+LOINC+Term+to+Expression+Reference+Set).
