# 4.2.5-transitive-closure-files

## 4.2.5 Transitive Closure Files

The [Transitive Closure](https://confluence.ihtsdotools.org/display/DOCGLOSS/Transitive+Closure) is the complete set of [relationships](https://confluence.ihtsdotools.org/display/DOCGLOSS/relationship) between every [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept) and each of its super-type [concepts](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept), in other words both its parents and [ancestors](https://confluence.ihtsdotools.org/display/DOCGLOSS/ancestor).

A transitive closure table is one of the most efficient ways to test for [subsumption between concepts](../../pages/createpage.action).

## Snapshot Transitive Closure File

SNOMED International provides an example of a [Transitive Closure Perl script file (click to download)](http://snomed.org/transclose) that can be used to generating a snapshot view of the transitive closure from the snapshot release of the [Relationship](https://confluence.ihtsdotools.org/display/DOCRELFMT/Relationship+file). The output of this script conforms to the following following file structure. Note that the primary key for this table consists of both columns.

Table 4.2.5-1: Transitive Closure File - Detailed Specification

| **Field**   | **Data type**                                                                     | **Purpose**                                                                                                                                                                                                                                                                                                                                   | **Part of Primary Key** |
| ----------- | --------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| subtypeId   | [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\)) | Id of the [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept) playing the [subtype](https://confluence.ihtsdotools.org/display/DOCGLOSS/subtype) role. Set to an [Identifier](https://confluence.ihtsdotools.org/display/DOCGLOSS/Identifier) of a [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept). | YES                     |
| supertypeId | [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\)) | Id of the [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept) playing the supertype role. Set to an [Identifier](https://confluence.ihtsdotools.org/display/DOCGLOSS/Identifier) of a [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept).                                                              | YES                     |

## Versioned Transitive Closure

A versioned view of the [Transitive Closure](https://confluence.ihtsdotools.org/display/DOCGLOSS/Transitive+Closure) can also be generated by combining the snapshot views for different effective times and removing redundant rows (e.g. where the transitive closure has not changed between release versions). The generated file could then be represented using the example specification below. Note that the unique key for this file would consist of the **subtypeId** , **supertypeId** and **effectiveTime**.

Table 4.2.5-2: Versioned Transitive Closure File - Example Specification

| **Field**                                                                                     | **Data type**                                                                         | **Purpose**                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | **Part of Primary Key** |
| --------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------- |
| subtypeId                                                                                     | [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\))     | Id of the [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept) playing the [subtype](https://confluence.ihtsdotools.org/display/DOCGLOSS/subtype) role. Set to an [Identifier](https://confluence.ihtsdotools.org/display/DOCGLOSS/Identifier) of a [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept).                                                                                                                                       | YES                     |
| supertypeId                                                                                   | [SCTID](https://confluence.ihtsdotools.org/display/DOCRELFMT/SCTID+\(data+type\))     | Id of the [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept) playing the supertype role. Set to an [Identifier](https://confluence.ihtsdotools.org/display/DOCGLOSS/Identifier) of a [concept](https://confluence.ihtsdotools.org/display/DOCGLOSS/concept).                                                                                                                                                                                                    | YES                     |
| [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\)) | [Time](https://confluence.ihtsdotools.org/display/DOCRELFMT/Time+\(data+type\))       | Specifies the inclusive date at which the [transitive closure](https://confluence.ihtsdotools.org/display/DOCGLOSS/transitive+closure) record was added or changed its active state.                                                                                                                                                                                                                                                                                                | YES                     |
| [active](https://confluence.ihtsdotools.org/display/DOCRELFMT/active+\(field\))               | [Boolean](https://confluence.ihtsdotools.org/display/DOCRELFMT/Boolean+\(data+type\)) | Specifies whether at the [transitive closure](https://confluence.ihtsdotools.org/display/DOCGLOSS/transitive+closure) represented by the subtypeId and supertypeId became valid ([active](https://confluence.ihtsdotools.org/display/DOCGLOSS/active)) or invalid ([inactive](https://confluence.ihtsdotools.org/display/DOCGLOSS/inactive)) from the point in time specified by the [effectiveTime](https://confluence.ihtsdotools.org/display/DOCRELFMT/effectiveTime+\(field\)). | NO                      |

## Related Links

* [7.5.2 Transitive closure implementation](../../pages/createpage.action)
